import{r as p,a as c,F as f,j as e,P as b,i as v,e as x,f as y,h as w,u as N,E as C,H as S,d as g}from"./index-a14c335c.js";const k=({options:r,value:n,onChange:o,placeholder:l="Select Data"})=>{const[t,d]=p.useState(null),u=r==null?void 0:r.find(s=>s.value===n),m=s=>{o(s),d(null)};return c(f,{children:[c("button",{onClick:s=>d(s.currentTarget),className:"inline-flex items-center rounded-md border border-gray-200 bg-white py-2 px-2 text-gray-700 hover:border-blue-600 focus:border-blue-600",children:[e("span",{className:"mr-1",children:(u==null?void 0:u.label)??l}),e("span",{className:"mx-1 h-5 w-[1px] bg-gray-200"}),c("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})," "]})]}),e(b,{overlay:!0,anchorRef:t,onClose:()=>d(null),className:"min-w-[200px]",children:e("div",{className:"min-w-full overflow-hidden rounded-md border border-gray-200 transition-all",children:r==null?void 0:r.map(s=>e("div",{role:"button","aria-hidden":!0,className:"cursor-pointer bg-white p-2 hover:bg-gray-100",onClick:()=>m&&m(s),children:s.label},s.value))})})]})},F=async(r,n)=>(await v.post("/upload/bulk",r,n)).data,j=r=>{const{toggleLoader:n}=x(),{errorSnackbar:o,successSnackbar:l}=w();return y({mutationFn:t=>F(t,{headers:{"Content-Type":"multipart/form-data"}}),onMutate:n,onSuccess:t=>{r(t),t.success?l("Successfully Upload Image(s)"):o("Failed upload image. Please try again later")},onError:t=>{o("Failed upload image. Please try again later")},onSettled:n})},I=()=>{const r=N(),[n,o]=p.useState(""),[l,t]=p.useState([]),{mutate:d}=j(a=>{a.success&&r("/images")}),u=a=>{const i=Object.entries(a.target.files??{}).map(h=>h[1]);a.target.value="",t(i)},m=a=>{t(l==null?void 0:l.filter(i=>i.name!==a.name))},s=()=>{const a=new FormData;a.append("category",n);for(let i=0;i<l.length;i++)a.append("image",l[i]);d(a)};return e("div",{className:"flex h-full flex-col p-8",children:c("div",{className:"flex flex-1 flex-col gap-4 rounded bg-white p-4 shadow-md",children:[c("div",{className:"flex items-center justify-between",children:[e("div",{}),c("div",{id:"uploadAs",className:"flex items-center gap-4",children:[e("span",{className:"flex",children:"Upload as"}),e(k,{value:n,onChange:a=>o(a.value),options:[{label:"Product",value:"product"},{label:"Category",value:"category"},{label:"Banner",value:"banner"}]})]})]}),e("input",{id:"fileInput",disabled:l.length>=10,type:"file",onChange:u,multiple:!0,size:2e3,accept:"image/png, image/jpg, image/jpeg",className:"hidden"}),c("label",{htmlFor:"fileInput",className:"flex h-full w-full flex-col items-center justify-center gap-5 border-b",children:[e(C,{className:"",fontSize:"80px"}),e("span",{children:"Click Anywhere to Upload Image"})]}),e("div",{className:"flex gap-4",children:l==null?void 0:l.map(a=>c("div",{className:"relative",children:[e("img",{alt:"",src:URL.createObjectURL(a),className:"h-16"}),e("div",{"aria-hidden":!0,onClick:()=>m(a),className:"absolute -right-2 -top-2 cursor-pointer rounded-full bg-white text-red-500",children:e(S,{fontSize:"20px"})})]},a.name))}),c("div",{className:"flex justify-between gap-4",children:[e(g,{onClick:()=>r("/images"),variant:"error",children:"Cancel"}),c("div",{className:"flex gap-4",children:[e(g,{onClick:()=>t([]),variant:"error",children:"Reset"}),e(g,{disabled:!l.length||l.length>10||n==="",onClick:s,children:"Submit"})]})]})]})})};export{I as default};
